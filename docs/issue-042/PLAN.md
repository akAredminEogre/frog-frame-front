# Issueの計画

<!-- Issueの計画を立てます。ユーザーストーリーに分解し、一つ一つにタスクを洗い出します。-->

## Story-1: 開発者としてコンテキストメニューのロジックをクリーンアーキテクチャに準拠した構造により保守性を向上させる

background.tsに含まれている複雑なコンテキストメニュー処理のビジネスロジックをapplication層に移管し、クリーンアーキテクチャに準拠した設計に改善する。

### タスク

- [x] HandleContextMenuSelectionUseCaseを作成してビジネスロジックを分離する
- [x] background.tsからコンテキストメニューの複雑なロジックを削除する
- [x] background.tsでUseCaseを呼び出すよう変更する

## Story-2: 開発者としてasync/awaitパターンによりコードの可読性を向上させる

コールバック地獄を解消して、より読みやすい非同期処理の実装に改善する。

### タスク

- [x] background.tsでasync/awaitパターンを採用する
- [x] コールバック地獄のコードをリファクタリングする
- [x] エラーハンドリングを改善する
