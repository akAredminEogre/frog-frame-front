# 進捗

このファイルは作業の記録を残すためのものです。追記のみ行い、内容の修正や削除は行わないでください。

kk=02
実装が完了したらPROGRESS-02-01.mdを追記してコードレビューを依頼してください
## スクラム-02(01回目) の進捗
<!-- ここに進捗を記載 -->

### 実施内容

未使用コードの扱いに関する改善案を検討し、最適なアプローチを決定しました。

#### 改善案の検討プロセス

1. **前提条件の整理**
   - 目的: 粒度の細かいPR提出を可能にする
   - 課題: 将来使う予定のコードが未使用として削除されてしまう
   - 制約: コード品質を維持し、真の未使用コードは検出・削除したい

2. **5つの改善案を比較検討**
   - 案1: test-and-lintを毎回実行 + 未使用コードを警告のみにする（評価: ★★★★☆）
   - 案2: test-and-lintの実行タイミングを開発者判断にする（評価: ★★☆☆☆）
   - 案3: knipの設定で意図的な未使用コードを管理（評価: ★★★☆☆）
   - 案4: 段階的なワークフロー（評価: ★★★★★）
   - 案5: knipの設定カスタマイズ + ワークフロー分離（評価: ★★★☆☆）

3. **推奨アプローチの決定**
   - **案4（段階的なワークフロー）を採用**
   - 理由:
     - 開発体験（DX）: 粒度の細かいPRが可能
     - 品質保証: issue単位で完全なクリーンアップを強制
     - 可視性: 常に未使用コードを把握できる
     - 実装コスト: 比較的シンプル
     - AI駆動開発: ワークフローの自動化が維持される

4. **実装計画の策定**
   - フェーズ1: package.jsonの修正（unused:check、test-dailyスクリプト追加）
   - フェーズ2: ワークフローファイルの修正（test-before-complete.md新規作成など）
   - フェーズ3: 動作検証

#### 決定した改善案の詳細

**デイリースクラム完了時（PRレビュー前）:**
- `npm run test:all`: 必須
- `npm run unused:check`: 警告のみ（新規スクリプト）
- 未使用コードがあっても警告表示のみでattempt_completion可能

**issue完了時（PRマージ前）:**
- `npm run test-and-lint`: 必須（従来通り）
- すべての未使用コードを解決

### 修正したファイル

- `frog-frame-front/docs/issue-089/PLAN.md`
  - 改善案の詳細分析を追加
  - 5つの改善案を比較検討
  - 推奨アプローチ（案4）を決定
  - 実装計画（3フェーズ）を策定

### 次回以降のスクラムに先送りする課題
<!-- 本issueで解決するが、本スクラムでは取り扱わない課題 -->

- package.jsonの修正（フェーズ1）
- ワークフローファイルの修正（フェーズ2）
- 動作検証（フェーズ3）

### 本issueの対象外とする課題

なし

### スクラム-02(01回目) のレビューコメント

<!-- ここはユーザが書くので空欄にしておいてください。 -->
<!-- ユーザーが使うコマンド frog-frame-front/.clinerules/02-workflow-automation/02-daily-scrum-starts/workflow:see-and-commit-review-comment-then-code-again.md -->
<!-- ユーザーが使うコマンド frog-frame-front/.clinerules/02-workflow-automation/03-daily-scrum-finishes/workflow:daily-scrum-pass-review.md -->

```
#### 案4: 段階的なワークフロー（推奨案）

**実装方法:**
1. デイリースクラム完了時（PRレビュー前）:
   - `npm run test:all`: 必須
   - `npm run unused:check`: 警告のみ（新規スクリプト）
   - 未使用コードがあっても警告表示のみでattempt_completion可能

2. issue完了時（PRマージ前）:
   - `npm run test-and-lint`: 必須（従来通り）
   - すべての未使用コードを解決

**具体的な実装:**
- package.jsonに追加:
  ```json
  "unused:check": "npm run knip:all --no-exit-code && echo '\n警告: 未使用コードが検出されました。issue完了時に解決してください。'"
  ```
- test-and-lint-before-complete.mdを2種類に分割:
  - `workflow:test-before-complete.md`: デイリースクラム用
  - `workflow:test-and-lint-before-complete.md`: issue完了用
```
について質問です。
もしかしたら今この開発で使っている、issueという単位でのPRやマージという運用を変える必要があるかもしれません。
というのも、現在issueという単位でブランチを作成し、PRを出しています。
なので、PRマージ前に未使用コードを解決してしまうと、結局issue単位での未使用コード解決になってしまい、粒度の細かいPRができなくなってしまうからです。
なので、提案いただいた案4は現状のissue運用では機能しません。
issueという単位自体も運用を変えたほうがよいでしょうか？つまり、issueは大きい単位での課題解決や機能追加と考え、1issue内で複数のPRを出すような運用に変える、ということです。
---
