# ISSUE-043 リライトルール適用ロジックのApplication層移管

## タイトル
リライトルール適用ロジックをbackground.tsからApplication層に移管

## 概要と理由
background.tsに実装されていたリライトルール適用に関する複雑なロジック（タブ情報取得、URLパターンチェック、コンテンツスクリプトへのメッセージ送信）をApplication層のUseCaseに移管し、アーキテクチャを改善しました。

これにより以下の効果を得られます：
- ビジネスロジックとインフラ層の責務を明確に分離
- テスタビリティの向上（UseCaseを単体でテスト可能）
- コードの再利用性向上
- 保守性とコードの理解しやすさの向上

## 主な変更点
- **新規作成**: `src/application/usecases/rule/ApplyRewriteRuleToTabUseCase.ts`
  - タブ情報取得ロジック
  - URLパターンチェックロジック  
  - コンテンツスクリプトへのメッセージ送信ロジック
  - エラーハンドリング（Promiseベースの非同期処理）
- **リファクタリング**: `entrypoints/background.ts`
  - 複雑なロジックを削除
  - 新しいUseCaseの呼び出しに単純化
  - エラーハンドリングをUseCaseに委譲

## テスト方法
1. 拡張機能をビルド・インストール
2. ポップアップから特定のタブに対してリライトルールを適用
3. 以前と同じ動作が確認できること
4. npm run unused:safe を実行し、未使用コードがないことを確認

## 補足
この変更は動作に影響を与えないリファクタリングです。外部から見た機能は従来と同一ですが、内部アーキテクチャが改善されています。今後、類似のロジックが必要になった場合、作成されたUseCaseを再利用できます。
