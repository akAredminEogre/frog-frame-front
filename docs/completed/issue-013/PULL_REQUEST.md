# ISSUE-013 PULL REQUEST

## タイトル
ISSUE-013 span要素の右クリック置換不具合修正

## 概要と理由
ISSUE-013で報告された、span要素内のテキストを右クリックして「この要素を置換」を選択した際に、span要素全体ではなくテキストのみが置換前フォームに自動入力される不具合を修正しました。
この問題は、`ElementSelector.getElementFromSelection()`が複数テキストノードや狭い選択範囲を適切に処理できていなかったことが原因でした。

## 主な変更点
- `ElementSelector.ts`の`getElementFromSelection()`メソッドを強化し、右クリック時の選択範囲処理、親要素の遡及処理、複数テキストノード対応を追加しました。
- `ElementSelector.test.ts`に、span要素内複数テキストノード、右クリック時の狭い選択範囲、インライン要素の適切な検出に関する単体テストを追加しました。
- `CODING_STYLE.md`に従ってコードを整形しました。

## テスト方法
1. 実際のHTML環境で、span要素内のテキスト（例: `<span class="inline-flex">"商品番号""："</span>`）を右クリックし、コンテキストメニューから「この要素を置換」を選択します。
2. ポップアップが開き、「置換前：」のフォームにspan要素全体（例: `<span class="inline-flex">"商品番号""："</span>`）が自動入力されることを確認します。
3. 既存のユニットテストおよびe2eテストが全て通過することを確認します。
4. 新規追加した単体テストが通過することを確認します。

## 補足
- モック環境と実環境の差異により、`hasAttributes`メソッドのフォールバック処理が必要となりました。
- 複雑な判定ロジック（span要素の特別扱い、複数テキストノード、共通祖先要素の優先度制御）に対応するため、慎重に実装を進めました。
- 右クリック選択の特殊性に対応するため、試行錯誤を重ねました。
- コマンド実行環境の差異（`&&`のエスケープ問題）が発生しましたが、ユーザーの協力により解決しました。
