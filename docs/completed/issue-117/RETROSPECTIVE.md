# 振り返り

このファイルでデイリースクラムの振り返りを行います。追記専用です。過去の内容を修正しないでください。
追記のときは最後尾に追加してください。

## スクラム01 の振り返り
<!-- KPT法で振り返りを行なってください -->

### Keep
<!-- うまく行ったこと、続けていきたいこと -->

- **体系的な原因究明アプローチ**
  - E2Eテストのタイムアウトから、import順序の変更 → DI初期化順序の問題という根本原因を特定できた
  - テスト失敗時に、差分を確認して変更内容を分析する手順が有効だった

- **ESLintのカスタムグループ機能の活用**
  - `eslint-plugin-simple-import-sort`のカスタムグループ設定により、プロジェクト固有の要件（DIコンテナを最優先）を満たすことができた
  - 汎用的なツールをプロジェクトの特性に合わせてカスタマイズする方針は継続すべき

- **テスト駆動の検証プロセス**
  - `make testcheck`で包括的なテスト（ユニット、E2E、lint、knip、tsr）を実行し、問題の有無を確実に確認できた
  - 修正後に全テストが通ることで、問題が解決したことを客観的に証明できた

### Problem
<!-- 問題点、苦労したこと、レビューで指摘を受けたこと -->

- **DI初期化順序の依存性に関する理解不足**
  - `reflect-metadata`の初期化タイミングがDIの動作に影響することを事前に認識していなかった
  - importソートを適用する際に、DI初期化への影響を考慮できていなかった

- **ユニットテストでDI問題を検知できなかった**
  - E2Eテストで初めて問題が発覚し、ユニットテストでは検知できなかった
  - ユニットテストがDIコンテナの初期化順序をテストできていない可能性がある
  - PLAN.mdに残タスクとして記録：「DIがコケたのにユニットテストで検知できなかったのはなぜか」

- **全ファイルへの一括適用による影響範囲の大きさ**
  - `npm run lint:fix`で148ファイルが一度に変更され、影響範囲が非常に大きくなった
  - 段階的な適用アプローチの検討が必要
  - PLAN.mdに残タスクとして記録：「全体ではなく、変更のあったファイルだけに対してimportソートを適用するにはどうすればよいか」

### Try
<!-- 次回やってみたいこと -->
<!-- タスクベースではなく、行動ルールとして記載してください。 -->

- **大規模な自動修正前のリスク分析**
  - 全ファイルに影響する変更を行う前に、潜在的なリスク（DI初期化、副作用など）を事前に洗い出す
  - 小規模なサンプルで動作確認してから全体適用する段階的アプローチを採用する

- **アーキテクチャ固有の制約をドキュメント化**
  - DIコンテナの初期化順序など、プロジェクト固有の制約をドキュメント化する
  - 将来の開発者が同様の問題を回避できるようにする

- **テスト戦略の見直し**
  - ユニットテストでDI初期化の問題を検知できるようにする方法を検討する
  - 統合テストのカバレッジを見直し、アーキテクチャレベルの問題を早期に発見できるようにする

---

## スクラム02 の振り返り

### Keep

- **段階的な改善アプローチ**
  - レビューコメントに応じて、機能を段階的に改善する方式が効果的だった
  - 警告の表示方法、テストコマンドでの制御など、ユーザーフィードバックに基づいて柔軟に調整できた
  - 一度に完璧な解を目指すのではなく、小さな改善を重ねる方針が良い結果を生んだ

- **統合テストの導入による品質向上**
  - E2Eテストより軽量で高速な統合テストを導入し、DI初期化問題を早期検知できるようになった
  - ユニットテストとE2Eテストの間を埋めるテスト層を追加したことで、テスト戦略が強化された
  - 実際のアプリケーション起動フローを再現するテストの重要性を再認識

- **開発者体験を重視した設計**
  - VSCodeでの情報レベル表示、手動実行のみのimportソートなど、開発者が柔軟に制御できる仕組みを構築
  - テストコマンド（`make testlint`, `make testcheck`）でのimport sort制御により、不要な警告を抑制
  - ツールが開発者を邪魔せず、必要な時に役立つバランスを実現

### Problem

- **要件の段階的な明確化**
  - 最初の実装後、複数回のレビューコメントを経て要件が明確になった
  - 「警告を出さない」→「情報レベルで表示」→「testlintでは自動修正しない」→「testcheckでは警告も表示しない」と段階的に調整
  - 初期段階でより詳細な要件定義ができていれば、手戻りを減らせた可能性がある

- **ESLint設定の理解に時間がかかった**
  - `eslint.config.js`での`'error'`, `'warn'`, `'off'`の使い分け
  - コマンドラインでのルールオーバーライド（`--rule 'simple-import-sort/imports: off'`）
  - VSCodeでの表示レベルカスタマイズ（`.vscode/settings.json`）
  - これらの組み合わせを理解し、適切に設定するまでに試行錯誤が必要だった

- **ドキュメントの更新タイミング**
  - スクラム02では主にコード修正に注力し、CLAUDE.mdやREADME等のドキュメント更新は最小限だった
  - 新しく追加した機能（`make sortimports`等）のドキュメント化が不十分な可能性がある

### Try

- **初期要件定義の強化**
  - 実装開始前に、より詳細なユースケースと期待される動作を確認する
  - 「こういう場合はどう動くべきか」という質問を事前に投げかけ、要件を明確にする
  - 段階的な改善は良いが、大きな手戻りは避けたい

- **新機能追加時のドキュメント更新を習慣化**
  - コード修正と同時に、関連ドキュメント（CLAUDE.md、README等）も更新する
  - 新しいコマンドやスクリプトを追加した際は、その使用方法と目的をドキュメントに記載する
  - 将来の開発者（または未来の自分）が迷わないようにする

- **ESLint設定のパターン整理**
  - 今回学んだESLint設定のパターン（ルールオーバーライド、VSCodeカスタマイズ等）を整理し、再利用可能にする
  - 類似の設定が必要になった際に、スムーズに対応できるようにする

---
<!-- ユーザーが使うコマンド workflow-commit-daily-scrum -->
<!-- ユーザーが使うコマンド frog-frame-front/.clinerules/02-workflow-automation/03-daily-scrum-finishes/workflow-commit-daily-scrum-then-start-next-daily-scrum.md -->
<!-- ユーザーが使うコマンド frog-frame-front/.clinerules/02-workflow-automation/03-daily-scrum-finishes/workflow-commit-daily-scrum-then-create-pr.md -->
