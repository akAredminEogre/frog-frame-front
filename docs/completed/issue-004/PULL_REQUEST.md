# 概要
issue-004: 正規表現を利用したDOM置換機能の実装

# 変更点
正規表現を利用してHTMLタグの置換を行えるようにするための機能を実装しました。
ユーザーがHTMLタグをエスケープせずに自然に記述できるUXを実現しています。

## 主な実装内容

### 1. ドメイン層の修正
- **`RewriteRule.ts`**: `isRegex?: boolean` プロパティを追加
- **`HtmlContent.ts`**: 正規表現置換ロジックの実装
  - `isRegex` が `true` の場合、入力文字列をそのまま正規表現パターンとして利用
  - ブラウザネイティブの `String.prototype.replace()` を使用したリファクタリング
  - 正規表現に `s` フラグを追加し、改行文字を含むパターンに対応
- **テストケース追加**: 正規表現置換の動作確認テストを追加

### 2. UI層の修正
- **`App.tsx`**: 正規表現を利用するかどうかを選択するチェックボックスを追加
- **UXの改善**: 「正規表現を使う」にチェックを入れると「キャプチャグループは `$1`, `$2` などで参照できます。」というヒントが表示される機能を追加

### 3. 不具合修正とデバッグ
- 手動テストで発見された不具合の調査・修正
- URLマッチング機能の動作確認
- デバッグログの追加と最終的なクリーンアップ

## 受け入れ条件の達成状況

✅ **正規表現を利用したDOM置換ができること**
- 置換前: `<h1>(.+)</h1>`、置換後: `<h2>$1</h2>` のような正規表現パターンが動作

✅ **正規表現のUXについて**
- ユーザーは `<h1>.+</h1>` のようにHTMLタグをエスケープせずに記述可能
- 後方参照（`$1`, `$2`など）が正常に動作

## 技術的な改善点

### コードの堅牢性向上
- ブラウザネイティブの `replace()` メソッドを直接利用することで、置換処理の信頼性を向上
- 正規表現の `s` フラグにより、改行文字を含むパターンマッチングに対応

### ユーザビリティの向上
- 正規表現機能の使用時にヒントを表示し、ユーザーの入力ミスを予防
- 直感的なチェックボックスUIで正規表現モードの切り替えが可能

## テスト結果
- 全テストケース成功: 10/10
- 手動テストによる動作確認済み
- 拡張機能のビルド成功

## 影響範囲
- ドメイン層: `RewriteRule`, `HtmlContent` およびそれらのテスト
- UI層: ポップアップ画面（`App.tsx`）
- 既存機能への影響なし（後方互換性を維持）
