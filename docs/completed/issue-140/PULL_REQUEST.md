# ISSUE-140 PULL REQUEST

## タイトル
feat: Tailwind CSS角括弧エスケープ機能の実装とE2Eテスト環境の最適化

## 概要と理由
TailwindCSS のユーティリティクラス `w-[200px]` などの角括弧記法に対するエスケープ機能を実装し、E2Eテストが正常に動作するよう修正しました。また、E2Eテスト環境の安定性向上のため、Playwrightの設定を最適化しました。

**解決した問題**:
- DOMのクラス内にTailwindCSSの角括弧記法が直接書かれている場合にE2Eテストが失敗する問題
- E2EテストのHTMLレポートサーバーによるCI環境でのハングアップ問題

## 主な変更点

### 1. TailwindCSS角括弧エスケープ機能
- **実装**: `RegexPatternProcessingStrategy.ts` に `escapeCssAttributeBrackets` メソッドを追加
- **機能**: CSS属性セレクター内の角括弧を適切にエスケープ (`[` → `\\[`, `]` → `\\]`)
- **テスト**: 12種類のテストケースで包括的な動作確認
- **適用範囲**: `w-[200px]`, `h-[100vh]`, `text-[#ff0000]` 等のTailwindCSSユーティリティクラス

### 2. E2Eテスト環境の最適化
- **Playwright設定**: HTMLレポーター設定を削除し、CI環境でのハングアップを防止
- **リトライ機能**: `--retries=2` オプションでテスト失敗時の自動再実行を維持
- **パフォーマンス**: 不要なレポート生成を削除し、テスト実行効率を向上

### 3. プロジェクト構成の整理
- **Tailwind設定**: `tailwind.config.js` の追加（テスト環境専用）
- **依存関係**: 必要最小限の設定でTailwindCSSサポートを実現
- **設定ファイル**: Makefile、package.json の一部整理

## テスト方法
[動作確認の手順]
1. **受け入れ条件の確認**:
   ```bash
   # E2Eテストの実行（w-[200px]クラスを含むテストページで成功することを確認）
   make e2e
   ```

2. **回帰テストの確認**:
   ```bash
   # 既存自動テストとlinterを同時に確認
   make testcheck
   ```

## 補足
[追加の文脈や注意点]

### 技術的な実装詳細
- **エスケープ対象**: CSS属性セレクター内の `[` と `]` 文字のみ
- **正規表現**: 既存の置換パターンに影響を与えない最小限の修正
- **互換性**: 既存のCSSセレクター機能を完全に維持

### E2Eテスト環境の改善
- **安定性向上**: テスト実行のハングアップ問題を根本的に解決
- **保守性**: シンプルで理解しやすい設定に最適化

## 本スコープの対象外となったタスク

### 外部依存による制約
- **Chrome Web Store**: 外部サービスの可用性に依存するE2Eテストの安定化
- **agilemanifesto.org**: 外部サイトへの依存によるタイムアウト問題

これらは本プロジェクトの制御範囲外であり、外部サービスの問題として本スコープから除外しました。

### 見送った実装
- **E2E事前確認機能**: 複雑化を避け、Playwrightの標準機能のみを使用する方針に変更
- **詳細なレポート機能**: CI環境での安定性を優先し、簡素な構成を採用

<!-- ユーザーが使うコマンド frog-frame-front/.clinerules/02-workflow-automation/04-pull-request/02-submit-pull-request.md -->
<!-- ユーザーが使うコマンド frog-frame-front/.clinerules/02-workflow-automation/04-pull-request/03-merge-pull-request.md -->