# Issue-051 振り返り

## Daily Scrum 01回目の振り返り

### 完了した作業
- Chrome拡張機能のtabs.sendMessageエラーの根本的解決
- 「No matching signature」エラーの修正
- 「Invalid tabId: undefined」エラーの原因特定と解決
- Chrome Runtime Message通信でのクラスインスタンスシリアライゼーション問題の解決
- 全テストケースの通過確認

### 技術的な学び
1. **Chrome Runtime Messageの制約理解**
   - クラスインスタンスをJSONシリアライズする際にメソッド・getterが失われる
   - プリミティブ値のみを送信し、受信側で再構築する必要性

2. **エラーハンドリングの重要性**
   - 各レイヤーでの詳細なバリデーションの重要性
   - デバッグログの活用効果

3. **テスト駆動の有効性**
   - 実装変更に合わせたテストケース更新の重要性

### 良かった点
- 根本原因の特定ができた
- Chrome Manifest V3の制約に対応した実装ができた
- E2Eテストと実機動作の整合性を確保できた
- 全テストケースが通過し、品質が担保された

### 改善点
- Chrome Runtime Message通信の制約について事前に調査していれば、より早期に解決できた可能性がある

### 次回への活かし方
- Chrome拡張機能開発での通信パターンのベストプラクティスを文書化する
- 類似のシリアライゼーション問題に対する対処法をナレッジとして蓄積する

## Daily Scrum 02回目の振り返り

### 完了した作業
- E2Eテストにエラー検知アサートを追加
- 全5つのE2Eテストファイルに汎用的なコンソールエラー監視機能を実装
- 実際のWebページエラーを除外する仕組みを実装（アサート直前にエラー監視開始）
- テストの品質と堅牢性を向上

### 技術的な学び
1. **E2Eテストでのエラー検知の課題**
   - Chrome拡張機能のエラーは通常のコンソールでは検知しにくい
   - 拡張機能管理画面でのみ確認可能なエラーが存在する

2. **テスト環境とエラー分離**
   - 実際のWebページのエラーと拡張機能のエラーを区別する重要性
   - アサート直前にエラー監視を開始することで、関係ないエラーを除外可能

3. **汎用的なエラー検知の有効性**
   - 特定のエラーメッセージではなく汎用的な検知により、新しいエラーパターンにも対応可能
   - `expect(consoleMessages).toHaveLength(0)` による簡潔で確実な検証

### 良かった点
- 全E2Eテストファイルに統一的にエラー検知機能を追加できた
- ユーザーフィードバックを受けて実際のWebページエラーを除外する改善を実装できた
- テストの信頼性と堅牢性が大幅に向上した
- 特定のエラーメッセージに依存しない柔軟な仕組みを構築できた

### 改善点
- 初期段階でChrome拡張機能特有のエラー検知の難しさを考慮していれば、より早く適切な解決策に到達できた
- E2Eテストの実行環境での外部エラーの影響について事前に考慮が不足していた

### 次回への活かし方
- Chrome拡張機能のE2Eテストにおけるエラー検知のベストプラクティスを文書化する
- テスト環境での外部要因（実際のWebページエラーなど）の分離パターンをナレッジとして蓄積する
- 汎用的なエラー検知パターンを他のテストにも適用可能か検討する

## Daily Scrum 03回目の振り返り

### Keep
- バリデーション規約に基づいた責務分離の実装ができた
- TabIdクラスが詳細バリデーションを担当し、他のクラスは成功/失敗パターンのみをテストする適切な構造を構築
- 個別ファイル構造の維持とユーザーフィードバックに迅速に対応
- 全テストケースが通過し、品質を保ちながらリファクタリングを完了

### Problem
- 初期に配列ベースでのテスト統合を行ったが、ユーザーの要望により個別ファイル構造に戻す作業が発生
- 異なる層（ドメイン層、アプリケーション層）での重複バリデーションテストの存在に気づくのが遅れた
- テストコーディング規約の理解に時間を要した

### Try
- 変更を実施する前に、ユーザーの好みや既存の構造の意図を事前に確認する
- 重複テストコードの存在を早期に発見するために、コード全体の検索・分析を最初に実施する
- 新しい規約やルールが導入された際は、その影響範囲を事前に把握してから作業に着手する
